{"version":3,"sources":["serviceWorker.js","actions/location.js","constants/location.js","services/location.js","reducers/location.js","constants/security.js","services/validation.js","services/security.js","constants/profile.js","reducers/security.js","reducers/profile.js","reducers.js","services/profile.js","actions/profile.js","actions/security.js","components/static/loading.js","components/static/notfound.js","components/profile/sidebar.js","components/form/row.js","components/button/button.js","components/form/cell.js","components/form/form.js","components/input/locked.js","components/input/input.js","components/input/checkbox.js","components/input/checkbox-input.js","components/input/date.js","components/input/password.js","components/profile/tabs/profile.js","components/table/table.js","components/profile/tabs/orders.js","components/profile/tabs/trips.js","components/profile/card.js","components/profile/profile.js","components/login/login.js","components/signup/signup.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","changeLocation","path","dispatch","getState","history","pushState","type","payload","sendLocation","getLocationParams","pathname","initialState","receivePath","state","nextState","SIGN_UP_ERROR","SERVER","PARSE","ERROR_WITH_MESSAGE","emailRegExp","RegExp","uppercaseSymbolRegExp","numberRegExp","validateEmail","value","test","validateMandatory","length","validatePassword","validatePasswordLength","validatePasswordNumber","validatePasswordUppercase","formatPhone","i","v","replace","toString","_","c","getCookie","cookieName","results","document","cookie","unescape","setCookie","name","expDate","domain","secure","cookie_string","escape","toGMTString","parseUserFromServer","user","photo","Image","surname","SurName","FirstName","midname","MidName","birthday","BirthDay","moment","toDate","Date","sex","Sex","parseInt","email","EMail","phone","Phone","parseUserToServer","parsedUser","format","password","Password","login","Login","FORM_STATE","ORDER_STATE","ORDER_CODE_BY_STATE","ORDER_STATE_BY_CODE","1","2","3","4","VEHICLE_TYPE","VEHICLE_CODE_BY_TYPE","VEHICLE_TYPE_BY_CODE","loggedIn","loginError","signUpError","cookies","uuid","receiveLoginError","error","receiveLoginInfo","receiveLogout","receiveCookies","receiveSignUpError","errorCode","errorMessage","receiveSignUpInfo","receiveSaveProfileSuccess","formState","formStateError","orders","ordersLoading","ordersError","receiveSaveProfileWait","receiveSaveProfileError","receiveGetOrdersWait","receiveGetOrdersError","receiveGetOrdersSuccess","combineReducers","action","security","profile","parseOrdersFromServer","parsedOrders","Array","isArray","order","push","parseOrderFromServer","number","Number","status","StatusID","sourcePlace","StartPoint","destinationPlace","EndPoint","vehicle","Vehicle","orderTime","DateTime","parseOrderToServer","parsedOrder","a","sendSaveProfileWait","fetch","method","headers","body","JSON","stringify","response","ok","sendSaveProfileError","result","json","sendSaveProfileSuccess","sendGetOrdersWait","sendGetOrdersError","sendGetOrdersSuccess","getOrders","saveProfile","ajaxSaveProfile","ajaxGetOrders","addOrder","ajaxAddOrder","cancelOrder","ajaxCancelOrder","checkUuid","expireDate","setMinutes","getMinutes","r","Math","random","sendCookies","ajaxGetLoginInfo","sendLogout","sendLoginInfo","ajaxSendLoginInfo","remember","sendLoginError","setMonth","getMonth","now","ajaxSignUp","sendSignUpError","sendSignUpInfo","logout","ajaxSendlogout","LoadingPage","className","React","PureComponent","NotFound","props","goBack","bind","goHome","back","this","onClick","Sidebar","icon","label","active","indexOf","MenuItem","Row","style","children","Button","disabled","Icon","Cell","Form","LockedInput","valid","short","key","Input","onChange","event","target","locked","mandatory","placeholder","Checkbox","checked","CheckboxInput","fullValueMap","keys","map","k","shortValueMap","DateInput","dateFormat","selected","PasswordInput","PasswordRequires","Note","ProfileTab","getPropsValues","changePhoto","changeInput","changeBirthday","changeSex","changeEmail","changePhone","changePassword","changePasswordConfirm","startEdit","save","cancelEdit","passwordConfirm","validation","validatePhone","input","createElement","accept","addEventListener","file","files","reader","FileReader","setState","Object","assign","readAsDataURL","click","parameter","validatePasswordConfirm","changes","prevProps","image","0","isValid","Photo","src","Table","initialContextMenu","visible","position","x","y","items","contextMenu","clearContextMenu","onContextMenu","listener","removeEventListener","cell","row","reactEvent","preventDefault","stopPropagation","contextMenuState","clientX","clientY","removeListener","clearMenu","columns","column","data","ContextMenu","callback","left","top","item","itemClick","ContextMenuItem","HeaderCell","DataRow","DataCell","printHandler","field","OrdersTab","loading","LoadingPlaceholder","ErrorPlaceholder","message","TripsTab","adding","showAdding","filteredData","filterActive","ActiveTrips","filterFrom","filterTo","contextMenuHandler","property","lowercaseFrom","toLowerCase","lowercaseTo","fromPlace","toPlace","changeFrom","changeTo","filterData","marginTop","Filter","NewTrip","vehicleOptions","from","to","changeVehicle","console","log","options","ProfileCard","activeTab","changeTab","tabName","tab","TabNav","Tab","TabBody","ProfilePage","LoginPage","loginValidation","passwordValidation","changeLogin","changeRemember","signUp","clearError","LoginError","SignUpPage","surnameValidation","nameValidation","emailValidation","passwordConfirmValidation","EMAIL_EXIST","SignUpError","errorText","maxWidth","App","autologin","clearSignUpError","clearLoginError","Component","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","thunk","ConnectedApp","connect","globalState","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.eedecc7e.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { LOCATION_SEND_PATH } from \"../constants/location\";\r\n\r\n/*****************\r\n * Plain actions *\r\n *****************/\r\nexport function sendLocation(path) {\r\n    return {\r\n        type: LOCATION_SEND_PATH,\r\n        payload: {\r\n            path: path\r\n        }\r\n    }\r\n}\r\n\r\n/***********\r\n * Actions *\r\n ***********/\r\nexport function changeLocation(path) {\r\n    return function (dispatch, getState) {\r\n        window.history.pushState(\"\", \"\", path);\r\n        dispatch(sendLocation(path));\r\n    }\r\n}","export const LOCATION = \"location\";\r\n\r\nexport const LOCATION_SEND_PATH = \"@@LOCATION_SEND_PATH\"; ","import { changeLocation } from \"../actions/location\";\r\n\r\nexport function getLocationParams() {\r\n    return {\r\n        path: window.location.pathname\r\n    }\r\n}\r\n\r\nexport function initializeLocation(dispatch){\r\n    window.addEventListener('popstate', function(event){\r\n        dispatch(changeLocation(getLocationParams().path));\r\n    });\r\n}","import { LOCATION_SEND_PATH } from \"../constants/location\";\r\nimport { getLocationParams } from \"../services/location\";\r\n\r\n\r\nexport const initialState = getLocationParams();\r\n\r\nfunction receivePath(state, { path }) {\r\n    const nextState = {...state};\r\n    nextState.path = path;\r\n    return nextState;\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case LOCATION_SEND_PATH: return receivePath(state, action.payload);\r\n        default: return state;\r\n    }\r\n}","export const SECURITY = \"security\";\r\n\r\nexport const SIGN_UP_ERROR = {\r\n    SERVER: 1,\r\n    PARSE: 2,\r\n    ERROR_WITH_MESSAGE: 3\r\n}\r\n\r\nexport const SECURITY_SEND_LOGIN_ERROR = \"@@SECURITY_SEND_LOGIN_ERROR\";\r\nexport const SECURITY_SEND_LOGIN_INFO = \"@@SECURITY_SEND_LOGIN_INFO\";\r\nexport const SECURITY_SEND_LOGOUT = \"@@SECURITY_SEND_LOGOUT\";\r\nexport const SECURITY_SEND_SIGN_UP_ERROR = \"@@SECURITY_SEND_SIGN_UP_ERROR\";\r\nexport const SECURITY_SEND_SIGN_UP_INFO = \"@@SECURITY_SEND_SIGN_UP_INFO\"; \r\nexport const SECURITY_SEND_COOKIES = \"@@SECURITY_SEND_COOKIES\"; ","export const emailRegExp = new RegExp(/.+@.+\\..+/);\r\nexport const uppercaseSymbolRegExp = new RegExp(/.*[A-ZА-Я].*/);\r\nexport const numberRegExp = new RegExp(/.*[0-9].*/);\r\n\r\nexport function validateEmail(value) {\r\n    return emailRegExp.test(value);\r\n}\r\n\r\nexport function validateMandatory(value) {\r\n    return value.length != 0;\r\n}\r\n\r\nexport function validatePassword(value) {\r\n    return validatePasswordLength(value) && validatePasswordNumber(value) && validatePasswordUppercase(value);\r\n}\r\n\r\nexport function validatePasswordLength(value) {\r\n    return value.length >= 6;\r\n}\r\n\r\nexport function validatePasswordNumber(value) {\r\n    return numberRegExp.test(value);\r\n}\r\n\r\nexport function validatePasswordUppercase(value) {\r\n    return uppercaseSymbolRegExp.test(value);\r\n}\r\n\r\nexport function formatPhone(value) {\r\n    let i = 0,\r\n        v = value.replace(/[^0-9]/g, \"\").toString();\r\n    return \"# ###-###-####\".replace(/#/g, _ => {\r\n        const c = v[i++];\r\n        if (typeof c == \"undefined\") {\r\n            return \"#\";\r\n        }\r\n        return c;\r\n    }).replace(/#.*/, \"\").replace(/[- ]$/, \"\");\r\n}","import moment from 'moment';\r\nimport { formatPhone, validatePassword } from \"./validation\";\r\n\r\nexport function getSecurityCookies() {\r\n    const cookies = {\r\n        uuid: getCookie(\"uuid\"),\r\n        user: getCookie(\"user\")\r\n    };\r\n    return cookies;\r\n}\r\n\r\nexport function uuidv4() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\nexport function getCookie(cookieName) {\r\n    var results = document.cookie.match('(^|;) ?' + cookieName + '=([^;]*)(;|$)');\r\n\r\n    if (results)\r\n        return (unescape(results[2]));\r\n    else\r\n        return null;\r\n}\r\n\r\nexport function setCookie(name, value, expDate, path, domain, secure) {\r\n    var cookie_string = name + \"=\" + escape(value);\r\n    if (expDate) {\r\n        cookie_string += \"; expires=\" + expDate.toGMTString();\r\n    }\r\n    if (path) {\r\n        cookie_string += \"; path=\" + escape(path);\r\n    }\r\n    if (domain) {\r\n        cookie_string += \"; domain=\" + escape(domain);\r\n    }\r\n    if (secure) {\r\n        cookie_string += \"; secure\";\r\n    }\r\n    document.cookie = cookie_string;\r\n}\r\n\r\nexport function parseUserFromServer(user) {\r\n    return {\r\n        photo: user.Image || null,\r\n        surname: user.SurName,\r\n        name: user.FirstName,\r\n        midname: user.MidName,\r\n        birthday: user.BirthDay ? moment(user.BirthDay, \"YYYY-MM-DD\").toDate() : new Date(),\r\n        sex: typeof user.Sex != \"undefined\" ? parseInt(user.Sex) : null,\r\n        email: user.EMail,\r\n        phone: formatPhone(user.Phone)\r\n    }\r\n}\r\n\r\nexport function parseUserToServer(user) {\r\n    let parsedUser = {}\r\n    if (user.photo) {\r\n        parsedUser.Image = user.photo;\r\n    }\r\n    if (user.surname) {\r\n        parsedUser.SurName = user.surname;\r\n    }\r\n    if (user.name) {\r\n        parsedUser.FirstName = user.name;\r\n    }\r\n    if (user.midname) {\r\n        parsedUser.MidName = user.midname;\r\n    }\r\n    if (user.birthday) {\r\n        parsedUser.BirthDay = moment(user.birthday).format(\"YYYY-MM-DD\");\r\n    }\r\n    if (typeof user.sex != \"undefined\") {\r\n        parsedUser.Sex = user.sex.toString();\r\n    }\r\n    if (user.email) {\r\n        parsedUser.EMail = user.email;\r\n    }\r\n    if (typeof user.phone != \"undefined\") {\r\n        parsedUser.Phone = user.phone;\r\n    }\r\n    if (user.password != \"*****\" && validatePassword(user.password)) {\r\n        parsedUser.Password = user.password;\r\n    }\r\n    if (user.login) {\r\n        parsedUser.Login = user.login;\r\n    }\r\n    return parsedUser;\r\n}","export const PROFILE = \"profile\";\r\n\r\nexport const FORM_STATE = {\r\n    WAIT: 1,\r\n    READY: 2,\r\n    SAVE_ERROR: 3\r\n}\r\n\r\nexport const ORDER_STATE = {\r\n    NEW: \"Новый\",\r\n    ACTIVE: \"Исполняется\",\r\n    CANCELED: \"Отменен\",\r\n    DELIVERED: \"Закрыт\"\r\n}\r\n\r\nexport const ORDER_CODE_BY_STATE = {\r\n    [ORDER_STATE.NEW]: 1,\r\n    [ORDER_STATE.ACTIVE]: 2,\r\n    [ORDER_STATE.CANCELED]: 3,\r\n    [ORDER_STATE.DELIVERED]: 4\r\n}\r\n\r\nexport const ORDER_STATE_BY_CODE = {\r\n    1: ORDER_STATE.NEW,\r\n    2: ORDER_STATE.ACTIVE,\r\n    3: ORDER_STATE.CANCELED,\r\n    4: ORDER_STATE.DELIVERED\r\n}\r\n\r\nexport const VEHICLE_TYPE = {\r\n    ECONOME: \"Экономный\",\r\n    BUISINESS: \"Бизнес\",\r\n    PREMIUM: \"Премиум\"\r\n}\r\n\r\nexport const VEHICLE_CODE_BY_TYPE = {\r\n    [VEHICLE_TYPE.ECONOME]: 1,\r\n    [VEHICLE_TYPE.BUISINESS]: 2,\r\n    [VEHICLE_TYPE.PREMIUM]: 3\r\n}\r\n\r\nexport const VEHICLE_TYPE_BY_CODE = {\r\n    1: VEHICLE_TYPE.ECONOME,\r\n    2: VEHICLE_TYPE.BUISINESS,\r\n    3: VEHICLE_TYPE.PREMIUM\r\n}\r\n\r\nexport const VEHICLE_TYPE_KEYS = [\"ECONOME\", \"BUISINESS\", \"PREMIUM\"]\r\n\r\nexport const PROFILE_SEND_SAVE_PROFILE_WAIT = \"@@PROFILE_SEND_SAVE_PROFILE_WAIT\";\r\nexport const PROFILE_SEND_SAVE_PROFILE_ERROR = \"@@PROFILE_SEND_SAVE_PROFILE_ERROR\";\r\nexport const PROFILE_SEND_SAVE_PROFILE_SUCCESS = \"@@PROFILE_SEND_SAVE_PROFILE_SUCCESS\";\r\nexport const PROFILE_SEND_GET_ORDERS_WAIT = \"@@PROFILE_SEND_GET_ORDERS_WAIT\";\r\nexport const PROFILE_SEND_GET_ORDERS_ERROR = \"@@PROFILE_SEND_GET_ORDERS_ERROR\";\r\nexport const PROFILE_SEND_GET_ORDERS_SUCCESS = \"@@PROFILE_SEND_GET_ORDERS_SUCCESS\";","import { SECURITY_SEND_LOGIN_ERROR, SECURITY_SEND_LOGIN_INFO, SECURITY_SEND_SIGN_UP_ERROR, SECURITY_SEND_SIGN_UP_INFO, SECURITY_SEND_LOGOUT, SECURITY_SEND_COOKIES } from \"../constants/security\";\r\nimport { getSecurityCookies } from \"../services/security\";\r\nimport { PROFILE_SEND_SAVE_PROFILE_SUCCESS } from \"../constants/profile\";\r\n\r\nexport const initialState = {\r\n    loggedIn: null,\r\n    loginError: false,\r\n    signUpError: null,\r\n    user: null,\r\n    cookies: getSecurityCookies()\r\n};\r\n\r\nfunction receiveLoginError(state, { error }) {\r\n    const nextState = { ...state };\r\n    nextState.loggedIn = false;\r\n    nextState.loginError = error;\r\n    nextState.user = null;\r\n    return nextState;\r\n}\r\n\r\nfunction receiveLoginInfo(state, { user }) {\r\n    const nextState = { ...state };\r\n    nextState.loggedIn = true;\r\n    nextState.loginError = false;\r\n    nextState.user = user;\r\n    return nextState;\r\n}\r\n\r\nfunction receiveLogout(state) {\r\n    let nextState = { ...state };\r\n    nextState.loggedIn = false;\r\n    nextState.loginError = false;\r\n    nextState.user = null;\r\n    if (nextState.cookies.uuid) {\r\n        nextState = receiveCookies(nextState, { uuid: null });\r\n    }\r\n    return nextState;\r\n}\r\n\r\nfunction receiveSignUpError(state, { error }) {\r\n    const nextState = { ...state };\r\n    nextState.signUpError = {\r\n        errorCode: error.errorCode,\r\n        errorMessage: error.errorMessage\r\n    };\r\n    return nextState;\r\n}\r\n\r\nfunction receiveSignUpInfo(state, { user }) {\r\n    const nextState = { ...state };\r\n    nextState.loggedIn = true;\r\n    nextState.signUpError = null;\r\n    nextState.user = user;\r\n    return nextState;\r\n}\r\n\r\nfunction receiveCookies(state, cookies) {\r\n    const nextState = { ...state };\r\n    nextState.cookies = { ...nextState.cookies, ...cookies };\r\n    return nextState;\r\n}\r\n\r\nfunction receiveSaveProfileSuccess(state, { user }) {\r\n    const nextState = { ...state };\r\n    nextState.user = user;\r\n    return nextState;\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case SECURITY_SEND_LOGIN_ERROR: return receiveLoginError(state, action.payload);\r\n        case SECURITY_SEND_LOGIN_INFO: return receiveLoginInfo(state, action.payload);\r\n        case SECURITY_SEND_LOGOUT: return receiveLogout(state, action.payload);\r\n        case SECURITY_SEND_SIGN_UP_ERROR: return receiveSignUpError(state, action.payload);\r\n        case SECURITY_SEND_SIGN_UP_INFO: return receiveSignUpInfo(state, action.payload);\r\n        case SECURITY_SEND_COOKIES: return receiveCookies(state, action.payload);\r\n        case PROFILE_SEND_SAVE_PROFILE_SUCCESS: return receiveSaveProfileSuccess(state, action.payload);\r\n        default: return state;\r\n    }\r\n}","import { SECURITY_SEND_LOGIN_ERROR, SECURITY_SEND_LOGIN_INFO, SECURITY_SEND_SIGN_UP_ERROR, SECURITY_SEND_SIGN_UP_INFO, SECURITY_SEND_LOGOUT, SECURITY_SEND_COOKIES } from \"../constants/security\";\r\nimport { getSecurityCookies } from \"../services/security\";\r\nimport { FORM_STATE, PROFILE_SEND_SAVE_PROFILE_WAIT, PROFILE_SEND_SAVE_PROFILE_ERROR, PROFILE_SEND_SAVE_PROFILE_SUCCESS, PROFILE_SEND_GET_ORDERS_WAIT, PROFILE_SEND_GET_ORDERS_ERROR, PROFILE_SEND_GET_ORDERS_SUCCESS } from \"../constants/profile\";\r\n\r\nexport const initialState = {\r\n    formState: FORM_STATE.READY,\r\n    formStateError: null,\r\n    orders: [],\r\n    ordersLoading: null,\r\n    ordersError: null\r\n};\r\n\r\nfunction receiveSaveProfileWait(state) {\r\n    const nextState = { ...state };\r\n    nextState.formState = FORM_STATE.WAIT;\r\n    return nextState;\r\n}\r\n\r\nfunction receiveSaveProfileError(state, { errorMessage }) {\r\n    const nextState = { ...state };\r\n    nextState.formState = FORM_STATE.SAVE_ERROR;\r\n    nextState.formStateError = errorMessage;\r\n    return nextState;\r\n}\r\n\r\nfunction receiveSaveProfileSuccess(state, { user }) {\r\n    const nextState = { ...state };\r\n    nextState.formState = FORM_STATE.READY;\r\n    return nextState;\r\n}\r\n\r\nfunction receiveGetOrdersWait(state) {\r\n    const nextState = { ...state };\r\n    nextState.ordersLoading = true;\r\n    nextState.ordersError = false;\r\n    return nextState;\r\n}\r\n\r\nfunction receiveGetOrdersError(state, { error }) {\r\n    const nextState = { ...state };\r\n    nextState.ordersLoading = false;\r\n    nextState.ordersError = error;\r\n    return nextState;\r\n}\r\n\r\nfunction receiveGetOrdersSuccess(state, { orders }) {\r\n    const nextState = { ...state };\r\n    nextState.ordersLoading = false;\r\n    nextState.ordersError = false;\r\n    nextState.orders = orders;\r\n    return nextState;\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case PROFILE_SEND_SAVE_PROFILE_WAIT: return receiveSaveProfileWait(state, action.payload);\r\n        case PROFILE_SEND_SAVE_PROFILE_ERROR: return receiveSaveProfileError(state, action.payload);\r\n        case PROFILE_SEND_SAVE_PROFILE_SUCCESS: return receiveSaveProfileSuccess(state, action.payload);\r\n        case PROFILE_SEND_GET_ORDERS_WAIT: return receiveGetOrdersWait(state, action.payload);\r\n        case PROFILE_SEND_GET_ORDERS_ERROR: return receiveGetOrdersError(state, action.payload);\r\n        case PROFILE_SEND_GET_ORDERS_SUCCESS: return receiveGetOrdersSuccess(state, action.payload);\r\n        default: return state;\r\n    }\r\n}","import { combineReducers } from 'redux'\r\nimport location from './reducers/location.js';\r\nimport security from './reducers/security.js';\r\nimport profile from './reducers/profile.js';\r\n\r\nexport default combineReducers({ location, security, profile });","import moment from 'moment';\r\nimport { VEHICLE_TYPE_BY_CODE, ORDER_CODE_BY_STATE, ORDER_STATE_BY_CODE, VEHICLE_CODE_BY_TYPE } from '../constants/profile';\r\n\r\nexport function parseOrdersFromServer(orders) {\r\n    const parsedOrders = [];\r\n    if (!Array.isArray(orders)) {\r\n        return parsedOrders;\r\n    }\r\n    for (let order of orders) {\r\n        parsedOrders.push(parseOrderFromServer(order));\r\n    }\r\n    return parsedOrders;\r\n}\r\n\r\nexport function parseOrderFromServer(order) {\r\n    return {\r\n        number: order.Number,\r\n        status: ORDER_STATE_BY_CODE[order.StatusID],\r\n        sourcePlace: order.StartPoint,\r\n        destinationPlace: order.EndPoint,\r\n        vehicle: VEHICLE_TYPE_BY_CODE[order.Vehicle] || \"\",\r\n        orderTime: moment(order.DateTime).toDate()\r\n    }\r\n}\r\n\r\nexport function parseOrderToServer(order) {\r\n    let parsedOrder = {\r\n    }\r\n    if (order.sourcePlace) {\r\n        parsedOrder.StartPoint = order.sourcePlace;\r\n    }\r\n    if (order.destinationPlace) {\r\n        parsedOrder.EndPoint = order.destinationPlace;\r\n    }\r\n    if (order.number) {\r\n        parsedOrder.Number = order.number;\r\n    }\r\n    if (order.status) {\r\n        parsedOrder.StatusID = ORDER_CODE_BY_STATE[order.status];\r\n    }\r\n    if (order.vehicle) {\r\n        parsedOrder.Vehicle = VEHICLE_CODE_BY_TYPE[order.vehicle];\r\n    }\r\n    return parsedOrder;\r\n}","import { parseUserFromServer, parseUserToServer } from \"../services/security\";\r\nimport { PROFILE_SEND_SAVE_PROFILE_WAIT, PROFILE_SEND_SAVE_PROFILE_ERROR, PROFILE_SEND_SAVE_PROFILE_SUCCESS, PROFILE_SEND_GET_ORDERS_WAIT, PROFILE_SEND_GET_ORDERS_ERROR, PROFILE_SEND_GET_ORDERS_SUCCESS } from \"../constants/profile\";\r\nimport { parseOrdersFromServer, parseOrderToServer } from \"../services/profile\";\r\nimport { SECURITY } from \"../constants/security\";\r\n\r\n/******************\r\n * Ajax functions *\r\n ******************/\r\nasync function ajaxSaveProfile(dispatch, login, photo, surname, name, midname, birthday, sex, email, phone, password) {\r\n    dispatch(sendSaveProfileWait());\r\n    let response = await fetch('/saveprofile.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify(parseUserToServer({ photo, login, surname, name, midname, birthday, sex, email, phone, password }))\r\n    });\r\n\r\n    if (!response.ok) {\r\n        dispatch(sendSaveProfileError());\r\n        return;\r\n    }\r\n    let result = null;\r\n    try {\r\n        result = await response.json();\r\n    } catch (e) {\r\n        dispatch(sendSaveProfileError());\r\n        return;\r\n    }\r\n    if (!result) {\r\n        dispatch(sendSaveProfileError());\r\n        return;\r\n    }\r\n    if (result.errorMessage) {\r\n        dispatch(sendSaveProfileError(result.errorMessage));\r\n        return;\r\n    }\r\n    dispatch(sendSaveProfileSuccess(parseUserFromServer(result)));\r\n}\r\n\r\nexport async function ajaxGetOrders(dispatch, login) {\r\n    dispatch(sendGetOrdersWait());\r\n    let response = await fetch('/getorders.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({ login: login })\r\n    });\r\n\r\n    if (!response.ok) {\r\n        dispatch(sendGetOrdersError());\r\n        return;\r\n    }\r\n    let result = null;\r\n    try {\r\n        result = await response.json();\r\n    } catch (e) {\r\n        dispatch(sendGetOrdersError());\r\n        return;\r\n    }\r\n    if (!result) {\r\n        dispatch(sendGetOrdersError());\r\n        return;\r\n    }\r\n    if (result.errorMessage) {\r\n        dispatch(sendGetOrdersError(result.errorMessage));\r\n        return;\r\n    }\r\n    dispatch(sendGetOrdersSuccess(parseOrdersFromServer(result)));\r\n}\r\n\r\nexport async function ajaxAddOrder(dispatch, sourcePlace, destinationPlace, vehicle) {\r\n    await fetch('/addorder.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify(parseOrderToServer({ sourcePlace, destinationPlace, vehicle }))\r\n    });\r\n    dispatch(getOrders());\r\n}\r\n\r\nexport async function ajaxCancelOrder(dispatch, number) {\r\n    await fetch('/cancelorder.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify(parseOrderToServer({ number }))\r\n    });\r\n    dispatch(getOrders());\r\n}\r\n\r\n/*****************\r\n * Plain actions *\r\n *****************/\r\nexport function sendSaveProfileWait() {\r\n    return {\r\n        type: PROFILE_SEND_SAVE_PROFILE_WAIT,\r\n        payload: null\r\n    }\r\n}\r\n\r\nexport function sendSaveProfileError(errorMessage = null) {\r\n    return {\r\n        type: PROFILE_SEND_SAVE_PROFILE_ERROR,\r\n        payload: {\r\n            errorMessage\r\n        }\r\n    }\r\n}\r\n\r\nexport function sendSaveProfileSuccess(user) {\r\n    return {\r\n        type: PROFILE_SEND_SAVE_PROFILE_SUCCESS,\r\n        payload: {\r\n            user: user\r\n        }\r\n    }\r\n}\r\n\r\nexport function sendGetOrdersWait() {\r\n    return {\r\n        type: PROFILE_SEND_GET_ORDERS_WAIT,\r\n        payload: null\r\n    }\r\n}\r\n\r\nexport function sendGetOrdersError(error = true) {\r\n    return {\r\n        type: PROFILE_SEND_GET_ORDERS_ERROR,\r\n        payload: {\r\n            error: error\r\n        }\r\n    }\r\n}\r\n\r\nexport function sendGetOrdersSuccess(orders) {\r\n    return {\r\n        type: PROFILE_SEND_GET_ORDERS_SUCCESS,\r\n        payload: {\r\n            orders: orders\r\n        }\r\n    }\r\n}\r\n\r\n/***********\r\n * Actions *\r\n ***********/\r\nexport function saveProfile(login, photo, surname, name, midname, birthday, sex, email, phone, password) {\r\n    return function (dispatch, getState) {\r\n        ajaxSaveProfile(dispatch, login, photo, surname, name, midname, birthday, sex, email, phone, password);\r\n    }\r\n}\r\nexport function getOrders() {\r\n    return function (dispatch, getState) {\r\n        const user = getState()[SECURITY].user;\r\n        if (!user) {\r\n            return;\r\n        }\r\n        ajaxGetOrders(dispatch, user.email);\r\n    }\r\n}\r\n\r\nexport function addOrder(sourcePlace, destinationPlace, vehicle) {\r\n    return function (dispatch, getState) {\r\n        ajaxAddOrder(dispatch, sourcePlace, destinationPlace, vehicle);\r\n    }\r\n}\r\n\r\nexport function cancelOrder(number) {\r\n    return function (dispatch, getState) {\r\n        ajaxCancelOrder(dispatch, number);\r\n    }\r\n}","import { SECURITY_SEND_LOGIN_ERROR, SECURITY_SEND_LOGIN_INFO, SIGN_UP_ERROR, SECURITY_SEND_SIGN_UP_ERROR, SECURITY_SEND_SIGN_UP_INFO, SECURITY_SEND_LOGOUT, SECURITY_SEND_COOKIES, SECURITY } from \"../constants/security\";\r\nimport { changeLocation } from \"./location\";\r\nimport { setCookie, uuidv4, parseUserFromServer } from \"../services/security\";\r\nimport { getOrders } from \"./profile\";\r\n\r\n/*******************\r\n * Utils functions *\r\n *******************/\r\nfunction checkUuid(dispatch, cookies) {\r\n    if (cookies.uuid) {\r\n        return;\r\n    }\r\n    const expireDate = new Date();\r\n    expireDate.setMinutes(expireDate.getMinutes() + 30);\r\n    const uuid = uuidv4();\r\n    setCookie(\"uuid\", uuid, expireDate);\r\n    dispatch(sendCookies({ uuid: uuid }));\r\n}\r\n\r\n/******************\r\n * Ajax functions *\r\n ******************/\r\nasync function ajaxGetLoginInfo(dispatch) {\r\n    let response = await fetch('/prepare.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({})\r\n    });\r\n\r\n    if (!response.ok) {\r\n        dispatch(sendLogout());\r\n        return;\r\n    }\r\n    let result = null;\r\n    try {\r\n        result = await response.json();\r\n    } catch (e) {\r\n        dispatch(sendLogout());\r\n        return;\r\n    }\r\n    if (!result) {\r\n        dispatch(sendLogout());\r\n        return;\r\n    }\r\n    dispatch(sendLoginInfo(parseUserFromServer(result)));\r\n    dispatch(getOrders());\r\n}\r\n\r\nasync function ajaxSendLoginInfo(dispatch, user, password, remember) {\r\n    let response = await fetch('/login.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({ user, password })\r\n    });\r\n\r\n    if (!response.ok) {\r\n        dispatch(sendLoginError());\r\n        return;\r\n    }\r\n    let result = null;\r\n    try {\r\n        result = await response.json();\r\n    } catch (e) {\r\n        dispatch(sendLoginError());\r\n        return;\r\n    }\r\n    if (!result) {\r\n        dispatch(sendLoginError());\r\n        return;\r\n    }\r\n    if (result.errorMessage) {\r\n        dispatch(sendLoginError({ errorCode: result.errorCode, errorMessage: result.errorMessage }));\r\n        return;\r\n    }\r\n    dispatch(sendLoginInfo(parseUserFromServer(result)));\r\n    dispatch(changeLocation(\"/\"));\r\n    if (remember) {\r\n        const expireDate = new Date();\r\n        expireDate.setMonth(expireDate.getMonth() + 1);\r\n        setCookie(\"user\", user, expireDate);\r\n    }\r\n    dispatch(getOrders());\r\n}\r\n\r\nasync function ajaxSendlogout(dispatch) {\r\n    await fetch('/logout.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        }\r\n    });\r\n\r\n    dispatch(sendLogout());\r\n    dispatch(changeLocation(\"/\"));\r\n    setCookie(\"uuid\", \"\", new Date(Date.now() - 1000));\r\n}\r\n\r\nasync function ajaxSignUp(dispatch, surname, name, midname, email, password) {\r\n    let response = await fetch('/signup.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({ surname, name, midname, email, password })\r\n    });\r\n\r\n    if (!response.ok) {\r\n        dispatch(sendSignUpError({ errorCode: SIGN_UP_ERROR.SERVER }));\r\n        return;\r\n    }\r\n    let result = null;\r\n    try {\r\n        result = await response.json();\r\n    } catch (e) {\r\n        dispatch(sendSignUpError({ errorCode: SIGN_UP_ERROR.PARSE }));\r\n        return;\r\n    }\r\n    if (!result) {\r\n        dispatch(sendSignUpError({ errorCode: SIGN_UP_ERROR.SERVER }));\r\n    }\r\n    if (result.errorMessage) {\r\n        dispatch(sendSignUpError({ errorCode: SIGN_UP_ERROR.ERROR_WITH_MESSAGE, errorMessage: result.errorMessage }));\r\n        return;\r\n    }\r\n    dispatch(sendSignUpInfo(result));\r\n    dispatch(changeLocation(\"/\"));\r\n    dispatch(getOrders());\r\n}\r\n\r\n/*****************\r\n * Plain actions *\r\n *****************/\r\nexport function sendLoginError(error = true) {\r\n    return {\r\n        type: SECURITY_SEND_LOGIN_ERROR,\r\n        payload: {\r\n            error: error\r\n        }\r\n    }\r\n}\r\n\r\nexport function sendLoginInfo(user) {\r\n    return {\r\n        type: SECURITY_SEND_LOGIN_INFO,\r\n        payload: {\r\n            user: user\r\n        }\r\n    }\r\n}\r\n\r\nexport function sendLogout() {\r\n    return {\r\n        type: SECURITY_SEND_LOGOUT,\r\n        payload: null\r\n    }\r\n}\r\n\r\nexport function sendSignUpError(error) {\r\n    return {\r\n        type: SECURITY_SEND_SIGN_UP_ERROR,\r\n        payload: {\r\n            error: error\r\n        }\r\n    }\r\n}\r\n\r\nexport function sendSignUpInfo(user) {\r\n    return {\r\n        type: SECURITY_SEND_SIGN_UP_INFO,\r\n        payload: {\r\n            user: user\r\n        }\r\n    }\r\n}\r\n\r\nexport function sendCookies(cookies) {\r\n    return {\r\n        type: SECURITY_SEND_COOKIES,\r\n        payload: {\r\n            cookies: cookies\r\n        }\r\n    }\r\n}\r\n\r\n/***********\r\n * Actions *\r\n ***********/\r\nexport function autologin() {\r\n    return async function (dispatch, getState) {\r\n        if (!getState()[SECURITY].cookies.uuid) {\r\n            dispatch(sendLogout());\r\n            return;\r\n        }\r\n        ajaxGetLoginInfo(dispatch);\r\n    }\r\n}\r\n\r\nexport function login(user, password, remember) {\r\n    return async function (dispatch, getState) {\r\n        checkUuid(dispatch, getState()[SECURITY].cookies);\r\n        ajaxSendLoginInfo(dispatch, user, password, remember);\r\n    }\r\n}\r\n\r\nexport function logout() {\r\n    return function (dispatch, getState) {\r\n        ajaxSendlogout(dispatch);\r\n    }\r\n}\r\n\r\nexport function signUp(surname, name, midname, email, password) {\r\n    return async function (dispatch, getState) {\r\n        checkUuid(dispatch, getState()[SECURITY].cookies);\r\n        ajaxSignUp(dispatch, surname, name, midname, email, password);\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class LoadingPage extends React.PureComponent {\r\n    render() {\r\n        return <div className=\"app\">\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport '../../css/notfound.css';\r\n\r\nexport default class NotFound extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.goBack = this.goBack.bind(this);\r\n        this.goHome = this.goHome.bind(this);\r\n    }\r\n\r\n    goBack() {\r\n        window.history.back();\r\n    }\r\n\r\n    goHome() {\r\n        this.props.changeLocation(\"/\");\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"app\">\r\n            <div className=\"app-background not-found-page\">\r\n                <div className=\"app-container not-found-page\">\r\n                    <div className=\"app-logo title\">\r\n                        <div className=\"svg logo\" />\r\n                        <span>DRON TAXI</span>\r\n                    </div>\r\n                    <div className=\"not-found-links\">\r\n                        <span className=\"link\" onClick={this.goBack}>Назад</span>\r\n                        <span> | </span>\r\n                        <span className=\"link\" onClick={this.goHome}>На главную</span>\r\n                    </div>\r\n                    <div className=\"not-found-title\">\r\n                        <span className=\"not-found-icon\">?</span>\r\n                        <span>Страница по пути \"{this.props.path}\" не найдена</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Sidebar extends React.PureComponent {\r\n\r\n    render() {\r\n        return <div className=\"profile-sidebar\">\r\n            <MenuItem\r\n                icon=\"icon-profile\"\r\n                label=\"Профиль\"\r\n                active={this.props.path.indexOf(\"/profile\") == 0}\r\n            />\r\n            <div className=\"filler\"></div>\r\n            <MenuItem\r\n                icon=\"icon-exit\"\r\n                label=\"Выход\"\r\n                onClick={this.props.logout}\r\n            />\r\n        </div>\r\n    }\r\n}\r\n\r\nclass MenuItem extends React.PureComponent {\r\n\r\n    render() {\r\n        let className = \"menu-item align-center\";\r\n        if (this.props.active) {\r\n            className += \" active\";\r\n        }\r\n        return <div className={className} onClick={this.props.onClick}>\r\n            <div className={`menu-icon svg ${this.props.icon}`}></div>\r\n            <span className=\"filler\">{this.props.label}</span>\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Row extends React.PureComponent {\r\n    render() {\r\n        let className = \"form-row\";\r\n        if (this.props.className) {\r\n            className += ` ${this.props.className}`;\r\n        }\r\n        return <div className={className} style={this.props.style}>{this.props.children}</div>\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Button extends React.PureComponent {\r\n    render() {\r\n        let className = \"btn\";\r\n        if (this.props.className) {\r\n            className += ` ${this.props.className}`;\r\n        }\r\n        if (this.props.disabled === true) {\r\n            className += ` disabled`;\r\n        }\r\n        return <button\r\n            className={className}\r\n            onClick={this.props.onClick}\r\n        >\r\n            <Icon icon={this.props.icon} />\r\n            <span className=\"btn-label\">{this.props.label}</span>\r\n        </button>\r\n    }\r\n}\r\n\r\nclass Icon extends React.PureComponent {\r\n    render() {\r\n        if (!this.props.icon) {\r\n            return null;\r\n        }\r\n        return <div className={`btn-icon ${this.props.icon}`} />\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Cell extends React.PureComponent {\r\n    render() {\r\n        let className = \"form-cell\";\r\n        if (this.props.className) {\r\n            className += ` ${this.props.className}`;\r\n        }\r\n        return <div className={className} style={this.props.style}>{this.props.children}</div>\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Form extends React.PureComponent {\r\n    render() {\r\n        let className = \"form\";\r\n        if (this.props.className) {\r\n            className += ` ${this.props.className}`;\r\n        }\r\n        return <div className={className}>{this.props.children}</div>\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class LockedInput extends React.PureComponent {\r\n\r\n    render() {\r\n        let className = \"form-input locked-input align-center\";\r\n        if (this.props.valid === false) {\r\n            className += \" invalid\";\r\n        }\r\n        if(this.props.short){\r\n            className += \" short\";\r\n        }\r\n        let value = this.props.value;\r\n        if (this.props.password) {\r\n            value = value.replace(/./g, \"*\");\r\n        }\r\n        return [\r\n            this.props.label ? <span key=\"label\" className=\"input-label\">{this.props.label}</span> : null,\r\n            <div key=\"input\" className={className}>\r\n                {value}\r\n            </div>\r\n        ]\r\n    }\r\n}","import React from 'react';\r\nimport LockedInput from './locked';\r\nimport { validatePasswordLength, validatePasswordUppercase, validatePasswordNumber } from '../../services/validation';\r\n\r\nexport default class Input extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onChange = this.onChange.bind(this);\r\n    }\r\n\r\n    onChange(event) {\r\n        this.props.onChange(event.target.value);\r\n    }\r\n\r\n    render() {\r\n        if (this.props.locked) {\r\n            return <LockedInput {...this.props} />\r\n        }\r\n        let className = \"form-input input input-text\";\r\n        if (this.props.valid === false) {\r\n            className += \" invalid\";\r\n        }\r\n        if (this.props.className) {\r\n            className += ` ${this.props.className}`;\r\n        }\r\n        let label = this.props.label;\r\n        if (this.props.mandatory) {\r\n            label += \" *\";\r\n        }\r\n        return [\r\n            this.props.label ? <span key=\"label\" className=\"input-label\">{label}</span> : null,\r\n            <input\r\n                key=\"input\"\r\n                type={this.props.password ? \"password\" : \"text\"}\r\n                className={className}\r\n                value={this.props.value}\r\n                placeholder={this.props.placeholder}\r\n                onChange={this.onChange}\r\n            >\r\n            </input>\r\n        ]\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Checkbox extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onChange = this.onChange.bind(this);\r\n    }\r\n\r\n    onChange(event) {\r\n        this.props.onChange(event.target.checked);\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"input-checkbox-container\">\r\n            <div className=\"form-checkbox input input-checkbox\">\r\n                <input\r\n                    type=\"checkbox\"\r\n                    className=\"input-checkbox\"\r\n                    checked={this.props.value}\r\n                    onChange={this.onChange}\r\n                >\r\n                </input>\r\n            </div>\r\n            <span className=\"input-checkbox-label title\">{this.props.label}</span>\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport Checkbox from './checkbox';\r\nimport LockedInput from './locked';\r\n\r\nexport default class CheckboxInput extends React.PureComponent {\r\n    render() {\r\n        if (this.props.locked) {\r\n            return <LockedInput {...this.props} value={this.props.fullValueMap[this.props.value]} short={true} />\r\n        }\r\n        let className = \"form-input input input-text\";\r\n        if (this.props.valid === false) {\r\n            className += \" invalid\";\r\n        }\r\n        let label = this.props.label;\r\n        if(this.props.mandatory){\r\n            label += \" *\";\r\n        }\r\n        return [\r\n            this.props.label ? <span key=\"label\" className=\"input-label\">{label}</span> : null,\r\n            <div key=\"checkbox\" className=\"checkbox-input-container\">\r\n                {this.props.keys.map((k) => <Checkbox\r\n                    key={k}\r\n                    value={this.props.value == k}\r\n                    label={this.props.shortValueMap[k]}\r\n                    onChange={this.props.onChange.bind(this, k)}\r\n                />)}\r\n            </div>\r\n        ]\r\n    }\r\n}","import React from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport moment from 'moment';\r\nimport LockedInput from './locked';\r\n\r\nexport default class DateInput extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onChange = this.onChange.bind(this);\r\n    }\r\n\r\n    onChange(value) {\r\n        this.props.onChange(value);\r\n    }\r\n\r\n    render() {\r\n        if (this.props.locked) {\r\n            const value = moment(this.props.value).format(\"DD.MM.YYYY\");\r\n            return <LockedInput {...this.props} value={value} short={true} />\r\n        }\r\n        let className = \"form-input input input-text input-date short\";\r\n        if (this.props.valid === false) {\r\n            className += \" invalid\";\r\n        }\r\n        let label = this.props.label;\r\n        if(this.props.mandatory){\r\n            label += \" *\";\r\n        }\r\n        return [\r\n            this.props.label ? <span key=\"label\" className=\"input-label\">{label}</span> : null,\r\n            <DatePicker\r\n                key=\"input\"\r\n                className={className}\r\n                dateFormat=\"dd.MM.yyyy\"\r\n                selected={this.props.value}\r\n                onChange={this.onChange}\r\n            />\r\n        ]\r\n    }\r\n}","import React from 'react';\r\nimport LockedInput from './locked';\r\nimport Input from './input';\r\nimport { validatePasswordLength, validatePasswordUppercase, validatePasswordNumber } from '../../services/validation';\r\n\r\nexport default class PasswordInput extends React.PureComponent {\r\n    render() {\r\n        if (this.props.locked) {\r\n            return <LockedInput {...this.props} />\r\n        }\r\n        return [\r\n            <Input key=\"input\" type=\"password\" {...this.props} />,\r\n            <PasswordRequires key=\"requires\" valid={this.props.valid} value={this.props.value} />\r\n        ]\r\n    }\r\n}\r\n\r\nclass PasswordRequires extends React.PureComponent {\r\n    render() {\r\n        if (this.props.valid !== false) {\r\n            return null;\r\n        }\r\n        return [\r\n            validatePasswordUppercase(this.props.value) ? null : <Note key=\"uppercase\" type=\"danger\" >Пароль должен содержать символы в верхнем регистре</Note>,\r\n            validatePasswordNumber(this.props.value) ? null : <Note key=\"number\" type=\"danger\" >Пароль должен содержать цифры</Note>,\r\n            validatePasswordLength(this.props.value) ? null : <Note key=\"length\" type=\"danger\" >Длина пароля должна быть не менее 6 символов</Note>\r\n        ]\r\n    }\r\n}\r\n\r\nclass Note extends React.PureComponent {\r\n    render() {\r\n        return <div className={`note-${this.props.type}`}>{this.props.children}</div>\r\n    }\r\n}","import React from 'react';\r\nimport Row from '../../form/row';\r\nimport Button from '../../button/button';\r\nimport Cell from '../../form/cell';\r\nimport Form from '../../form/form';\r\nimport Input from '../../input/input';\r\nimport CheckboxInput from '../../input/checkbox-input';\r\nimport DateInput from '../../input/date';\r\nimport { validateEmail, validatePassword, validateMandatory, formatPhone } from '../../../services/validation';\r\nimport PasswordInput from '../../input/password';\r\nimport { FORM_STATE } from '../../../constants/profile';\r\n\r\nexport default class ProfileTab extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = this.getPropsValues();\r\n\r\n        this.changePhoto = this.changePhoto.bind(this);\r\n        this.changeInput = this.changeInput.bind(this);\r\n        this.changeBirthday = this.changeBirthday.bind(this);\r\n        this.changeSex = this.changeSex.bind(this);\r\n        this.changeEmail = this.changeEmail.bind(this);\r\n        this.changePhone = this.changePhone.bind(this);\r\n        this.changePassword = this.changePassword.bind(this);\r\n        this.changePasswordConfirm = this.changePasswordConfirm.bind(this);\r\n        this.startEdit = this.startEdit.bind(this);\r\n        this.save = this.save.bind(this);\r\n        this.cancelEdit = this.cancelEdit.bind(this);\r\n    }\r\n\r\n    getPropsValues() {\r\n        return {\r\n            locked: true,\r\n            photo: this.props.photo || null,\r\n            surname: this.props.surname || \"\",\r\n            name: this.props.name || \"\",\r\n            midname: this.props.midname || \"\",\r\n            birthday: this.props.birthday || new Date(),\r\n            sex: this.props.sex || 0,\r\n            email: this.props.email || \"\",\r\n            phone: this.props.phone || \"\",\r\n            password: \"*****\",\r\n            passwordConfirm: \"*****\",\r\n            validation: {\r\n                surname: this.props.surname ? validateMandatory(this.props.surname) : null,\r\n                name: this.props.name ? validateMandatory(this.props.name) : null,\r\n                midname: this.props.midname ? validateMandatory(this.props.midname) : null,\r\n                birthday: this.props.birthday ? validateMandatory(this.props.birthday) : true,\r\n                email: this.props.email ? validateEmail(this.props.email) : null,\r\n                phone: this.props.phone ? this.validatePhone(this.props.phone) : true,\r\n                password: null,\r\n                passwordConfirm: null,\r\n            }\r\n        }\r\n    }\r\n\r\n    changePhoto() {\r\n        const profile = this;\r\n        const input = document.createElement(\"input\");\r\n        input.type = \"file\";\r\n        input.accept = \"image/*\";\r\n        input.addEventListener(\"change\", function (event) {\r\n            const file = input.files[0];\r\n            const reader = new FileReader();\r\n\r\n            reader.addEventListener(\"load\", function () {\r\n                // convert image file to base64 string\r\n                profile.setState(Object.assign({}, profile.state, { photo: reader.result }));\r\n            }, false);\r\n\r\n            if (file) {\r\n                reader.readAsDataURL(file);\r\n            }\r\n        });\r\n        input.click();\r\n    }\r\n\r\n    changeInput(parameter, mandatory, value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState[parameter] = value;\r\n        if (mandatory) {\r\n            nextState.validation[parameter] = validateMandatory(value);\r\n        }\r\n        this.setState(nextState);\r\n    }\r\n\r\n    changeBirthday(value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState.birthday = value;\r\n        nextState.validation.birthday = validateMandatory(value);\r\n        this.setState(nextState);\r\n    }\r\n\r\n    changeSex(value) {\r\n        this.setState(Object.assign({}, this.state, { sex: value }));\r\n    }\r\n\r\n    changeEmail(value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState.email = value;\r\n        nextState.validation.email = validateEmail(value);\r\n        this.setState(nextState);\r\n    }\r\n\r\n\r\n    changePhone(value) {\r\n        value = value.replace(/[^0-9]/g, \"\");\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState.phone = formatPhone(value);\r\n        nextState.validation.phone = this.validatePhone(value)\r\n        this.setState(nextState);\r\n    }\r\n\r\n    changePassword(value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState.password = value;\r\n        nextState.validation.password = validatePassword(value);\r\n        nextState.validation.passwordConfirm = this.validatePasswordConfirm(this.state.passwordConfirm, value);\r\n        this.setState(nextState);\r\n    }\r\n\r\n    changePasswordConfirm(value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState.passwordConfirm = value;\r\n        nextState.validation.passwordConfirm = this.validatePasswordConfirm(value);\r\n        this.setState(nextState);\r\n    }\r\n\r\n    validatePhone(value) {\r\n        value = value.replace(/[^0-9]/g, \"\");\r\n        return value.length == 11 || value.length == 0;\r\n    }\r\n\r\n    validatePasswordConfirm(value, password = this.state.password) {\r\n        return value === password;\r\n    }\r\n\r\n    isValid() {\r\n        return this.state.validation.surname\r\n            && this.state.validation.name\r\n            && this.state.validation.midname\r\n            && this.state.validation.birthday\r\n            && this.state.validation.email\r\n            && this.state.validation.phone\r\n            && this.state.validation.password != false\r\n            && this.state.validation.passwordConfirm != false;\r\n    }\r\n\r\n    startEdit() {\r\n        this.setState(Object.assign({}, this.state, { locked: false }));\r\n    }\r\n\r\n    save() {\r\n        let changes = {\r\n            login: this.props.email,\r\n            password: this.state.password\r\n        };\r\n        if (this.state.photo != this.props.photo) {\r\n            changes.photo = this.state.photo;\r\n        }\r\n        if (this.state.surname != this.props.surname) {\r\n            changes.surname = this.state.surname;\r\n        }\r\n        if (this.state.name != this.props.name) {\r\n            changes.name = this.state.name;\r\n        }\r\n        if (this.state.midname != this.props.midname) {\r\n            changes.midname = this.state.midname;\r\n        }\r\n        if (this.state.birthday != this.props.birthday) {\r\n            changes.birthday = this.state.birthday;\r\n        }\r\n        if (this.state.sex != this.props.sex) {\r\n            changes.sex = this.state.sex;\r\n        }\r\n        if (this.state.email != this.props.email) {\r\n            changes.email = this.state.email;\r\n        }\r\n        if (this.state.phone != this.props.phone) {\r\n            changes.phone = this.state.phone;\r\n        }\r\n        this.props.save(changes);\r\n    }\r\n\r\n    cancelEdit() {\r\n        this.setState(Object.assign({}, this.state, this.getPropsValues()));\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.formState == FORM_STATE.WAIT && this.props.formState == FORM_STATE.READY) {\r\n            this.cancelEdit();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"tab-body\">\r\n            <Row className=\"justify-right\">\r\n                <Button\r\n                    className={\"btn-blue btn-edit\" + (this.state.locked ? \"\" : \" invisible\")}\r\n                    icon=\"svg icon-edit\"\r\n                    label=\"Редактировать\"\r\n                    onClick={this.startEdit}\r\n                />\r\n            </Row>\r\n            <Row className=\"body-form\">\r\n                <Cell className=\"justify-start align-center photo-cell\">\r\n                    <Photo image={this.state.photo} />\r\n                    {!this.state.locked && <Row>\r\n                        <Cell>\r\n                            <Button\r\n                                label=\"Обновить\"\r\n                                className=\"btn-blue\"\r\n                                onClick={this.changePhoto}\r\n                            />\r\n                        </Cell>\r\n                    </Row>}\r\n                </Cell>\r\n                <Cell className=\"justify-start align-center\">\r\n                    <Form>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Input\r\n                                    label=\"Фамилия\"\r\n                                    placeholder=\"\"\r\n                                    password={false}\r\n                                    value={this.state.surname}\r\n                                    valid={this.state.validation.surname}\r\n                                    locked={this.state.locked}\r\n                                    mandatory={true}\r\n                                    onChange={this.changeInput.bind(this, \"surname\", true)}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Input\r\n                                    label=\"Имя\"\r\n                                    placeholder=\"\"\r\n                                    password={false}\r\n                                    value={this.state.name}\r\n                                    valid={this.state.validation.name}\r\n                                    locked={this.state.locked}\r\n                                    mandatory={true}\r\n                                    onChange={this.changeInput.bind(this, \"name\", true)}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Input\r\n                                    label=\"Отчество\"\r\n                                    placeholder=\"\"\r\n                                    password={false}\r\n                                    value={this.state.midname}\r\n                                    valid={this.state.validation.midname}\r\n                                    locked={this.state.locked}\r\n                                    mandatory={true}\r\n                                    onChange={this.changeInput.bind(this, \"midname\", true)}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <DateInput\r\n                                    label=\"Дата рождения\"\r\n                                    placeholder=\"\"\r\n                                    password={false}\r\n                                    value={this.state.birthday}\r\n                                    valid={this.state.validation.birthday}\r\n                                    locked={this.state.locked}\r\n                                    mandatory={true}\r\n                                    onChange={this.changeBirthday}\r\n                                />\r\n                            </Cell>\r\n                            <div className=\"filler\" />\r\n                            <Cell>\r\n                                <CheckboxInput\r\n                                    label=\"Пол\"\r\n                                    placeholder=\"\"\r\n                                    password={false}\r\n                                    value={this.state.sex}\r\n                                    locked={this.state.locked}\r\n                                    keys={[1, 0]}\r\n                                    shortValueMap={{ 0: \"Ж\", 1: \"М\" }}\r\n                                    fullValueMap={{ 0: \"Женский\", 1: \"Мужской\" }}\r\n                                    onChange={this.changeSex}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                    </Form>\r\n                </Cell>\r\n                <Cell className=\"justify-start align-center\">\r\n                    <Form>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Input\r\n                                    label=\"Email\"\r\n                                    placeholder=\"\"\r\n                                    password={false}\r\n                                    value={this.state.email}\r\n                                    valid={this.state.validation.email}\r\n                                    locked={this.state.locked}\r\n                                    mandatory={true}\r\n                                    onChange={this.changeEmail}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Input\r\n                                    label=\"Телефон\"\r\n                                    placeholder=\"Введите номер (формат 9 999-999-9999)\"\r\n                                    password={false}\r\n                                    value={this.state.phone}\r\n                                    valid={this.state.validation.phone}\r\n                                    locked={this.state.locked}\r\n                                    mandatory={false}\r\n                                    onChange={this.changePhone}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <PasswordInput\r\n                                    label=\"Пароль\"\r\n                                    placeholder=\"\"\r\n                                    password={true}\r\n                                    value={this.state.password}\r\n                                    valid={this.state.validation.password}\r\n                                    locked={this.state.locked}\r\n                                    mandatory={true}\r\n                                    onChange={this.changePassword}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        {!this.state.locked && <Row>\r\n                            <Cell>\r\n                                <Input\r\n                                    label=\"Подтвердить пароль\"\r\n                                    placeholder=\"\"\r\n                                    password={true}\r\n                                    value={this.state.passwordConfirm}\r\n                                    valid={this.state.validation.passwordConfirm}\r\n                                    locked={this.state.locked}\r\n                                    mandatory={true}\r\n                                    onChange={this.changePasswordConfirm}\r\n                                />\r\n                            </Cell>\r\n                        </Row>}\r\n                    </Form>\r\n                </Cell>\r\n            </Row>\r\n            {!this.state.locked && <Row className=\"justify-right align-center edit-btns\">\r\n                {this.props.formState == FORM_STATE.SAVE_ERROR && <div className=\"note-danger\">{this.props.formStateError || \"Ошибка при сохранении\"}</div>}\r\n                <Button\r\n                    className=\"btn-green\"\r\n                    label=\"Сохранить\"\r\n                    disabled={!this.isValid()}\r\n                    onClick={this.save}\r\n                />\r\n                <Button\r\n                    className=\"btn-blue btn-edit\"\r\n                    label=\"Отмена\"\r\n                    onClick={this.cancelEdit}\r\n                />\r\n            </Row>}\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass Photo extends React.PureComponent {\r\n    render() {\r\n        if (!this.props.image) {\r\n            return <div className=\"profile-photo svg icon-empty-profile\"></div>;\r\n        }\r\n        return <div className=\"profile-photo\">\r\n            <img src={this.props.image} />\r\n        </div>;\r\n    }\r\n}","import React from 'react';\r\nimport moment from 'moment';\r\n\r\nexport default class Table extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.initialContextMenu = {\r\n            visible: false,\r\n            position: {\r\n                x: 0,\r\n                y: 0\r\n            },\r\n            items: []\r\n        }\r\n\r\n        this.state = {\r\n            contextMenu: this.initialContextMenu\r\n        }\r\n\r\n        this.clearContextMenu = this.clearContextMenu.bind(this);\r\n        this.onContextMenu = this.onContextMenu.bind(this);\r\n    }\r\n\r\n    clearContextMenu() {\r\n        this.setState(Object.assign({}, this.state, { contextMenu: this.initialContextMenu }));\r\n    }\r\n\r\n    removeListener(listener) {\r\n        document.removeEventListener(\"click\", listener);\r\n    }\r\n\r\n    onContextMenu(cell, row, reactEvent) {\r\n        if (!this.props.contextMenu) {\r\n            return null;\r\n        }\r\n        reactEvent.preventDefault();\r\n        reactEvent.stopPropagation();\r\n        const contextMenuState = {\r\n            visible: true,\r\n            position: {\r\n                x: reactEvent.clientX,\r\n                y: reactEvent.clientY\r\n            },\r\n            items: this.props.contextMenu(cell, row)\r\n        }\r\n        this.setState(Object.assign({}, this.state, { contextMenu: contextMenuState }));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.listener = document.addEventListener(\"click\", () => {\r\n            this.clearContextMenu();\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.listener) {\r\n            this.removeListener(this.listener);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = \"table\";\r\n        if (this.props.className) {\r\n            className += ` ${this.props.className}`;\r\n        }\r\n        return [\r\n            <ContextMenu\r\n                key=\"contextMenu\"\r\n                visible={this.state.contextMenu.visible}\r\n                position={this.state.contextMenu.position}\r\n                items={this.state.contextMenu.items}\r\n                clearMenu={this.clearContextMenu}\r\n            />,\r\n            <table key=\"table\" className={className}>\r\n                <thead className=\"table-header\">\r\n                    <tr>\r\n                        {this.props.columns.map((column, i) => <HeaderCell key={i} label={column.label} />)}\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"table-body\">\r\n                    {this.props.data.map((row, i) => <DataRow\r\n                        key={i}\r\n                        row={row}\r\n                        columns={this.props.columns}\r\n                        onContextMenu={this.onContextMenu}\r\n                    />)}\r\n                </tbody>\r\n            </table>\r\n        ]\r\n    }\r\n}\r\n\r\nclass ContextMenu extends React.PureComponent {\r\n\r\n    itemClick(callback, reactEvent) {\r\n        callback();\r\n        this.props.clearMenu();\r\n    }\r\n\r\n    render() {\r\n        if(!this.props.visible){\r\n            return null;\r\n        }\r\n        return <div className=\"context-menu\" style={{ left: this.props.position.x, top: this.props.position.y }}>\r\n            {this.props.items.map((item, i) => <ContextMenuItem key={i} label={item.label} onClick={this.itemClick.bind(this, item.onClick)} />)}\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass ContextMenuItem extends React.PureComponent {\r\n    render() {\r\n        return <div className=\"context-menu-item\" onClick={this.props.onClick}>{this.props.label}</div>;\r\n    }\r\n}\r\n\r\nclass HeaderCell extends React.PureComponent {\r\n    render() {\r\n        return <th className=\"cell\">{this.props.label}</th>;\r\n    }\r\n}\r\n\r\nclass DataRow extends React.PureComponent {\r\n    render() {\r\n        return <tr className=\"row\">\r\n            {this.props.columns.map((column, i) => <DataCell\r\n                key={i}\r\n                row={this.props.row}\r\n                column={column}\r\n                onContextMenu={this.props.onContextMenu}\r\n            />)}\r\n        </tr>;\r\n    }\r\n}\r\n\r\nclass DataCell extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.printHandler = this.printHandler.bind(this);\r\n        this.onContextMenu = this.onContextMenu.bind(this);\r\n    }\r\n\r\n    printHandler(cell, row) {\r\n        if (this.props.column.format == \"dateTime\") {\r\n            return moment(cell).format(\"DD.MM.YYYY hh:mm:ss\");\r\n        }\r\n        if (this.props.column.format == \"currency\") {\r\n            return cell + \" р\";\r\n        }\r\n        return cell;\r\n    }\r\n\r\n    onContextMenu(reactEvent) {\r\n        this.props.onContextMenu(this.props.row[this.props.column.field], this.props.row, reactEvent);\r\n    }\r\n\r\n    render() {\r\n        let printHandler = this.printHandler;\r\n        if (this.props.column.printHandler) {\r\n            printHandler = this.props.column.printHandler;\r\n        }\r\n        return <td className=\"cell\" onContextMenu={this.onContextMenu}>\r\n            {printHandler(this.props.row[this.props.column.field], this.props.row)}\r\n        </td>;\r\n    }\r\n}","import React from 'react';\r\nimport Table from '../../table/table';\r\n\r\nexport default class OrdersTab extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.columns = [\r\n            {\r\n                field: \"sourcePlace\",\r\n                label: \"Место отправления\"\r\n            },\r\n            {\r\n                field: \"destinationPlace\",\r\n                label: \"Место прибытия\"\r\n            },\r\n            {\r\n                field: \"orderTime\",\r\n                label: \"Время заказа\",\r\n                format: \"dateTime\"\r\n            },\r\n            {\r\n                field: \"status\",\r\n                label: \"Статус заказа\"\r\n            }\r\n        ];\r\n    }\r\n\r\n    render() {\r\n        if (this.props.loading) {\r\n            return <LoadingPlaceholder />;\r\n        }\r\n        if (this.props.error) {\r\n            return <ErrorPlaceholder error={this.props.error} />;\r\n        }\r\n        return <div className=\"tab-body orders-container\">\r\n            <Table\r\n                columns={this.columns}\r\n                data={this.props.data}\r\n            />\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass LoadingPlaceholder extends React.PureComponent {\r\n    render() {\r\n        return <div className=\"tab-body trips-container justify-center align-center\">\r\n            <div className=\"title\">Загрузка...</div>\r\n        </div>\r\n    }\r\n}\r\n\r\nclass ErrorPlaceholder extends React.PureComponent {\r\n    render() {\r\n        let message = \"Ошибка при загрузке поездок\";\r\n        if (this.props.error && this.props.error.errorMessage) {\r\n            message = this.props.error.errorMessage;\r\n        }\r\n        return <div className=\"tab-body trips-container justify-center align-center\">\r\n            <div className=\"title invalid-text\">{message}</div>\r\n        </div>;\r\n    }\r\n}","import React from 'react';\r\nimport Select from 'react-select';\r\nimport Row from '../../form/row';\r\nimport Input from '../../input/input';\r\nimport Table from '../../table/table';\r\nimport Button from '../../button/button';\r\nimport { ORDER_STATE, VEHICLE_TYPE } from '../../../constants/profile';\r\nimport { validateMandatory } from '../../../services/validation';\r\n\r\nexport default class TripsTab extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            adding: false\r\n        }\r\n\r\n        this.showAdding = this.showAdding.bind(this);\r\n        this.addOrder = this.addOrder.bind(this);\r\n    }\r\n\r\n    showAdding() {\r\n        this.setState(Object.assign({}, this.state, { adding: true }));\r\n    }\r\n\r\n    addOrder({ sourcePlace, destinationPlace, vehicle }) {\r\n        this.props.addOrder({ sourcePlace, destinationPlace, vehicle });\r\n        this.setState(Object.assign({}, this.state, { adding: false }));\r\n    }\r\n\r\n    filterActive(data) {\r\n        const filteredData = [];\r\n        for (let row of data) {\r\n            if (row.status == ORDER_STATE.ACTIVE || row.status == ORDER_STATE.NEW) {\r\n                filteredData.push(row);\r\n            }\r\n        }\r\n        return filteredData;\r\n    }\r\n\r\n    render() {\r\n        if (this.props.error) {\r\n            return <ErrorPlaceholder error={this.props.error} />;\r\n        }\r\n        return <div className=\"tab-body trips-container\">\r\n            <ActiveTrips\r\n                data={this.filterActive(this.props.data)}\r\n                showAdding={this.showAdding}\r\n                loading={this.props.loading}\r\n                adding={this.state.adding}\r\n                cancelOrder={this.props.cancelOrder}\r\n            />\r\n            <NewTrip\r\n                visible={this.state.adding}\r\n                addOrder={this.addOrder}\r\n            />\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass LoadingPlaceholder extends React.PureComponent {\r\n    render() {\r\n        return <div className=\"tab-body trips-container justify-center align-center\">\r\n            <div className=\"title\">Загрузка...</div>\r\n        </div>\r\n    }\r\n}\r\n\r\nclass ErrorPlaceholder extends React.PureComponent {\r\n    render() {\r\n        let message = \"Ошибка при загрузке поездок\";\r\n        if (this.props.error && this.props.error.errorMessage) {\r\n            message = this.props.error.errorMessage;\r\n        }\r\n        return <div className=\"tab-body trips-container justify-center align-center\">\r\n            <div className=\"title invalid-text\">{message}</div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass ActiveTrips extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            filterFrom: \"\",\r\n            filterTo: \"\"\r\n        }\r\n\r\n        this.changeInput = this.changeInput.bind(this);\r\n\r\n        this.columns = [\r\n            {\r\n                field: \"sourcePlace\",\r\n                label: \"Место отправления\"\r\n            },\r\n            {\r\n                field: \"destinationPlace\",\r\n                label: \"Место прибытия\"\r\n            },\r\n            {\r\n                field: \"orderTime\",\r\n                label: \"Время заказа\",\r\n                format: \"dateTime\"\r\n            },\r\n            {\r\n                field: \"status\",\r\n                label: \"Статус заказа\"\r\n            }\r\n        ];\r\n\r\n        this.contextMenuHandler = this.contextMenuHandler.bind(this);\r\n    }\r\n\r\n    contextMenuHandler(cell, row) {\r\n        return [\r\n            {\r\n                label: \"Отменить\",\r\n                onClick: this.cancelOrder.bind(this, row)\r\n            }\r\n        ]\r\n    }\r\n\r\n    cancelOrder(row) {\r\n        this.props.cancelOrder({ number: row.number });\r\n    }\r\n\r\n    changeInput(property, value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState[property] = value;\r\n        this.setState(nextState);\r\n    }\r\n\r\n    filterData(data) {\r\n        if (!this.state.filterFrom && !this.state.filterTo) {\r\n            return data;\r\n        }\r\n        const filteredData = [];\r\n        const lowercaseFrom = this.state.filterFrom.toLowerCase();\r\n        const lowercaseTo = this.state.filterTo.toLowerCase();\r\n        for (let row of data) {\r\n            if (this.state.filterFrom\r\n                && row.sourcePlace\r\n                && row.sourcePlace.toLowerCase().indexOf(lowercaseFrom) != -1) {\r\n                filteredData.push(row);\r\n                continue;\r\n            }\r\n            if (this.state.filterTo\r\n                && row.destinationPlace\r\n                && row.destinationPlace.toLowerCase().indexOf(lowercaseTo) != -1) {\r\n                filteredData.push(row);\r\n                continue;\r\n            }\r\n        }\r\n        return filteredData;\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"trips-active\">\r\n            <div className=\"title\">Мои поездки</div>\r\n            <Filter\r\n                fromPlace={this.state.filterFrom}\r\n                toPlace={this.state.filterTo}\r\n                changeFrom={this.changeInput.bind(this, \"filterFrom\")}\r\n                changeTo={this.changeInput.bind(this, \"filterTo\")}\r\n            />\r\n            {this.props.loading ? <LoadingPlaceholder /> : <Table\r\n                columns={this.columns}\r\n                data={this.filterData(this.props.data)}\r\n                contextMenu={this.contextMenuHandler}\r\n            />}\r\n            {!this.props.adding && <Row className=\"justify-right\" style={{ marginTop: \"20px\" }}>\r\n                <Button\r\n                    className={\"btn-green btn-edit\"}\r\n                    label=\"Новая поездка\"\r\n                    onClick={this.props.showAdding}\r\n                />\r\n            </Row>}\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass Filter extends React.PureComponent {\r\n    render() {\r\n        return <div className=\"filter\">\r\n            <div className=\"svg icon-filter\"></div>\r\n            <Input\r\n                placeholder=\"Место отправления\"\r\n                password={false}\r\n                value={this.props.fromPlace}\r\n                onChange={this.props.changeFrom}\r\n            />\r\n            <Input\r\n                placeholder=\"Место назначения\"\r\n                password={false}\r\n                value={this.props.toPlace}\r\n                onChange={this.props.changeTo}\r\n            />\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass NewTrip extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.vehicleOptions = [\r\n            { value: VEHICLE_TYPE.ECONOME, label: VEHICLE_TYPE.ECONOME },\r\n            { value: VEHICLE_TYPE.BUISINESS, label: VEHICLE_TYPE.BUISINESS },\r\n            { value: VEHICLE_TYPE.PREMIUM, label: VEHICLE_TYPE.PREMIUM }\r\n        ]\r\n\r\n        this.initialState = {\r\n            from: \"\",\r\n            to: \"\",\r\n            vehicle: this.vehicleOptions[0],\r\n            validation: {\r\n                from: null,\r\n                to: null\r\n            }\r\n        }\r\n\r\n        this.state = this.initialState;\r\n\r\n        this.changeFrom = this.changeFrom.bind(this);\r\n        this.changeTo = this.changeTo.bind(this);\r\n        this.changeVehicle = this.changeVehicle.bind(this);\r\n        this.addOrder = this.addOrder.bind(this);\r\n    }\r\n\r\n    isValid() {\r\n        return this.state.validation.from && this.state.validation.to;\r\n    }\r\n\r\n    changeFrom(value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState.from = value;\r\n        nextState.validation.from = validateMandatory(value);\r\n        this.setState(nextState);\r\n    }\r\n\r\n    changeTo(value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState.to = value;\r\n        nextState.validation.to = validateMandatory(value);\r\n        this.setState(nextState);\r\n    }\r\n\r\n    changeVehicle(value) {\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState.vehicle = value;\r\n        this.setState(nextState);\r\n        console.log(nextState)\r\n    }\r\n\r\n    addOrder() {\r\n        this.props.addOrder({\r\n            sourcePlace: this.state.from,\r\n            destinationPlace: this.state.to,\r\n            vehicle: this.state.vehicle.value\r\n        });\r\n        this.setState(this.initialState);\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.visible) {\r\n            return null;\r\n        }\r\n        return <div className=\"trips-create\">\r\n            <div className=\"title\">Новая поездка</div>\r\n            <Row>\r\n                <Input\r\n                    placeholder=\"Откуда\"\r\n                    password={false}\r\n                    value={this.state.from}\r\n                    valid={this.state.validation.from}\r\n                    onChange={this.changeFrom}\r\n                />\r\n            </Row>\r\n            <Row>\r\n                <Input\r\n                    placeholder=\"Куда\"\r\n                    password={false}\r\n                    value={this.state.to}\r\n                    valid={this.state.validation.to}\r\n                    onChange={this.changeTo}\r\n                />\r\n            </Row>\r\n            <Row>\r\n                <Select\r\n                    className=\"select\"\r\n                    value={this.state.vehicle}\r\n                    onChange={this.changeVehicle}\r\n                    options={this.vehicleOptions}\r\n                />\r\n            </Row>\r\n            <div className=\"filler\"></div>\r\n            <Row>\r\n                <Button\r\n                    className={\"btn-green btn-edit\"}\r\n                    label=\"Поехали\"\r\n                    disabled={!this.isValid()}\r\n                    onClick={this.addOrder}\r\n                />\r\n            </Row>\r\n        </div>;\r\n    }\r\n}","import React from 'react';\r\n\r\nimport ProfileTab from './tabs/profile';\r\nimport OrdersTab from './tabs/orders';\r\nimport TripsTab from './tabs/trips';\r\n\r\nconst PROFILE_TAB = \"profile\";\r\nconst ORDER_TAB = \"orders\";\r\nconst TRIP_TAB = \"trips\";\r\n\r\n\r\n\r\nexport default class ProfileCard extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activeTab: PROFILE_TAB\r\n        }\r\n\r\n        this.changeTab = this.changeTab.bind(this);\r\n    }\r\n\r\n    changeTab(tabName) {\r\n        this.setState(Object.assign({}, this.state, { activeTab: tabName }));\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"profile-card\">\r\n            <div className=\"title\">Мой профиль</div>\r\n            <div className=\"tab-container\">\r\n                <TabNav>\r\n                    <Tab tab={PROFILE_TAB} activeTab={this.state.activeTab} changeTab={this.changeTab}>Личные данные</Tab>\r\n                    <Tab tab={ORDER_TAB} activeTab={this.state.activeTab} changeTab={this.changeTab}>Мои заказы</Tab>\r\n                    <Tab tab={TRIP_TAB} activeTab={this.state.activeTab} changeTab={this.changeTab}>Мои поездки</Tab>\r\n                </TabNav>\r\n                <TabBody\r\n                    user={this.props.user}\r\n                    formState={this.props.formState}\r\n                    formStateError={this.props.formStateError}\r\n                    orders={this.props.orders}\r\n                    ordersError={this.props.ordersError}\r\n                    ordersLoading={this.props.ordersLoading}\r\n                    activeTab={this.state.activeTab}\r\n                    saveProfile={this.props.saveProfile}\r\n                    addOrder={this.props.addOrder}\r\n                    cancelOrder={this.props.cancelOrder}\r\n                />\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nclass TabNav extends React.PureComponent {\r\n    render() {\r\n        return <div className=\"tab-nav\">{this.props.children}</div>\r\n    }\r\n}\r\n\r\nclass Tab extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.changeTab = this.changeTab.bind(this);\r\n    }\r\n\r\n    changeTab() {\r\n        this.props.changeTab(this.props.tab);\r\n    }\r\n\r\n    render() {\r\n        let className = \"tab align-center justify-center\";\r\n        if (this.props.activeTab == this.props.tab) {\r\n            className += \" active\";\r\n        }\r\n        return <div className={className} onClick={this.changeTab}>{this.props.children}</div>\r\n    }\r\n}\r\n\r\nclass TabBody extends React.PureComponent {\r\n    render() {\r\n        switch (this.props.activeTab) {\r\n            case PROFILE_TAB:\r\n                return <ProfileTab\r\n                    {...this.props.user}\r\n                    formState={this.props.formState}\r\n                    formStateError={this.props.formStateError}\r\n                    save={this.props.saveProfile}\r\n                />;\r\n            case ORDER_TAB:\r\n                return <OrdersTab\r\n                    error={this.props.ordersError}\r\n                    loading={this.props.ordersLoading}\r\n                    data={this.props.orders}\r\n                />;\r\n            case TRIP_TAB:\r\n                return <TripsTab\r\n                    error={this.props.ordersError}\r\n                    loading={this.props.ordersLoading}\r\n                    data={this.props.orders}\r\n                    addOrder={this.props.addOrder}\r\n                    cancelOrder={this.props.cancelOrder}\r\n                />\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n}","import React from 'react';\r\nimport Sidebar from './sidebar';\r\nimport ProfileCard from './card';\r\nimport '../../css/profile.css';\r\n\r\nexport default class ProfilePage extends React.PureComponent {\r\n\r\n    render() {\r\n        return <div className=\"app light\">\r\n            <div className=\"app-container\">\r\n                <div className=\"app-logo title\">\r\n                    <div className=\"svg logo\" />\r\n                    <span>DRON TAXI</span>\r\n                </div>\r\n                <div className=\"profile-container\">\r\n                    <Sidebar\r\n                        path={this.props.path}\r\n                        logout={this.props.logout}\r\n                    />\r\n                    <ProfileCard\r\n                        user={this.props.user}\r\n                        formState={this.props.formState}\r\n                        formStateError={this.props.formStateError}\r\n                        orders={this.props.orders}\r\n                        ordersError={this.props.ordersError}\r\n                        ordersLoading={this.props.ordersLoading}\r\n                        saveProfile={this.props.saveProfile}\r\n                        addOrder={this.props.addOrder}\r\n                        cancelOrder={this.props.cancelOrder}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport Form from '../form/form';\r\nimport Row from '../form/row';\r\nimport Cell from '../form/cell';\r\nimport Input from '../input/input';\r\nimport Checkbox from '../input/checkbox';\r\nimport Button from '../button/button';\r\nimport { validateEmail, validateMandatory } from '../../services/validation';\r\nimport '../../css/login.css';\r\n\r\nexport default class LoginPage extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            login: this.props.cookies.user || \"\",\r\n            password: \"\",\r\n            loginValidation: null,\r\n            passwordValidation: null,\r\n            remember: Boolean(this.props.cookies.user)\r\n        }\r\n\r\n        if (this.state.login) {\r\n            this.state.loginValidation = validateEmail(this.state.login);\r\n        }\r\n\r\n        this.changeLogin = this.changeLogin.bind(this);\r\n        this.changePassword = this.changePassword.bind(this);\r\n        this.changeRemember = this.changeRemember.bind(this);\r\n        this.login = this.login.bind(this);\r\n        this.signUp = this.signUp.bind(this);\r\n    }\r\n\r\n    changeLogin(value) {\r\n        this.clearError();\r\n        const loginValidation = validateEmail(value);\r\n        this.setState(Object.assign({}, this.state, { login: value, loginValidation }));\r\n    }\r\n\r\n    changePassword(value) {\r\n        this.clearError();\r\n        const passwordValidation = validateMandatory(value);\r\n        this.setState(Object.assign({}, this.state, { password: value, passwordValidation }));\r\n    }\r\n\r\n    changeRemember(value) {\r\n        this.setState(Object.assign({}, this.state, { remember: value }));\r\n    }\r\n\r\n    isValid() {\r\n        return this.state.loginValidation && this.state.passwordValidation;\r\n    }\r\n\r\n    login() {\r\n        this.props.login({\r\n            user: this.state.login,\r\n            password: this.state.password,\r\n            remember: this.state.remember\r\n        });\r\n    }\r\n\r\n    signUp() {\r\n        this.props.changeLocation(\"/signup\");\r\n    }\r\n\r\n    clearError() {\r\n        if (!this.props.error) {\r\n            return;\r\n        }\r\n        this.props.clearError();\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"app\">\r\n            <div className=\"app-background\">\r\n                <div className=\"app-container\">\r\n                    <div className=\"app-logo title\">\r\n                        <div className=\"svg logo\" />\r\n                        <span>DRON TAXI</span>\r\n                    </div>\r\n                    <Form className=\"login-form\">\r\n                        <Row>\r\n                            <Cell>\r\n                                <span className=\"title\">АВТОРИЗАЦИЯ</span>\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Input\r\n                                    label=\"Логин\"\r\n                                    placeholder=\"Введите логин\"\r\n                                    password={false}\r\n                                    value={this.state.login}\r\n                                    valid={this.state.loginValidation}\r\n                                    onChange={this.changeLogin}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Input\r\n                                    label=\"Пароль\"\r\n                                    placeholder=\"Введите пароль\"\r\n                                    password={true}\r\n                                    value={this.state.password}\r\n                                    valid={this.state.passwordValidation}\r\n                                    onChange={this.changePassword}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Checkbox\r\n                                    label=\"Запомнить\"\r\n                                    value={this.state.remember}\r\n                                    onChange={this.changeRemember}\r\n                                />\r\n                            </Cell>\r\n                            <Cell>\r\n                                <Button\r\n                                    label=\"Войти\"\r\n                                    className=\"btn-blue\"\r\n                                    disabled={!this.isValid()}\r\n                                    onClick={this.login}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <Row>\r\n                            <Cell>\r\n                                <Button\r\n                                    label=\"Регистрация\"\r\n                                    className=\"btn-green\"\r\n                                    onClick={this.signUp}\r\n                                />\r\n                            </Cell>\r\n                        </Row>\r\n                        <LoginError error={this.props.error} />\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nclass LoginError extends React.PureComponent {\r\n    render() {\r\n        if (!this.props.error) {\r\n            return null\r\n        }\r\n        let message = \"Ошибка при авторизации\";\r\n        if(this.props.error.errorMessage){\r\n            message = this.props.error.errorMessage;\r\n        }\r\n        return <Row>\r\n            <Cell className=\"title invalid-text\">\r\n                <span>{message}</span>\r\n            </Cell>\r\n        </Row>\r\n    }\r\n}","import React from 'react';\r\nimport Form from '../form/form';\r\nimport Row from '../form/row';\r\nimport Cell from '../form/cell';\r\nimport Input from '../input/input';\r\nimport Button from '../button/button';\r\nimport { SIGN_UP_ERROR } from '../../constants/security';\r\nimport { validateMandatory, validateEmail, validatePassword } from '../../services/validation';\r\nimport '../../css/signup.css';\r\nimport PasswordInput from '../input/password';\r\n\r\nexport default class SignUpPage extends React.PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            surname: \"\",\r\n            name: \"\",\r\n            midname: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            passwordConfirm: \"\",\r\n            surnameValidation: null,\r\n            nameValidation: null,\r\n            emailValidation: null,\r\n            passwordValidation: null,\r\n            passwordConfirmValidation: null\r\n        }\r\n\r\n        this.changeInput = this.changeInput.bind(this);\r\n        this.changeEmail = this.changeEmail.bind(this);\r\n        this.changePassword = this.changePassword.bind(this);\r\n        this.changePasswordConfirm = this.changePasswordConfirm.bind(this);\r\n        this.signUp = this.signUp.bind(this);\r\n    }\r\n\r\n    changeInput(parameter, mandatory, value) {\r\n        this.clearError();\r\n        const nextState = Object.assign({}, this.state);\r\n        nextState[parameter] = value;\r\n        if (mandatory) {\r\n            nextState[parameter + \"Validation\"] = validateMandatory(value);\r\n        }\r\n        this.setState(nextState);\r\n    }\r\n\r\n    changeEmail(value) {\r\n        this.clearError();\r\n        const emailValidation = validateEmail(value);\r\n        this.setState(Object.assign({}, this.state, { email: value, emailValidation }));\r\n    }\r\n\r\n    changePassword(value) {\r\n        this.clearError();\r\n        const passwordValidation = validatePassword(value);\r\n        const passwordConfirmValidation = this.validatePasswordConfirm(this.state.passwordConfirm, value);\r\n        this.setState(Object.assign({}, this.state, { password: value, passwordValidation, passwordConfirmValidation }));\r\n    }\r\n\r\n    changePasswordConfirm(value) {\r\n        const passwordConfirmValidation = this.validatePasswordConfirm(value);\r\n        this.setState(Object.assign({}, this.state, { passwordConfirm: value, passwordConfirmValidation }));\r\n    }\r\n\r\n    clearError() {\r\n        if (!this.props.error) {\r\n            return;\r\n        }\r\n        this.props.clearError();\r\n    }\r\n\r\n    validatePasswordConfirm(value, password = this.state.password) {\r\n        return value === password;\r\n    }\r\n\r\n    isValid() {\r\n        return this.state.surnameValidation\r\n            && this.state.nameValidation\r\n            && this.state.emailValidation\r\n            && this.state.passwordValidation\r\n            && this.state.passwordConfirmValidation;\r\n    }\r\n\r\n    signUp() {\r\n        this.props.signUp({\r\n            surname: this.state.surname,\r\n            name: this.state.name,\r\n            midname: this.state.midname,\r\n            email: this.state.email,\r\n            password: this.state.password\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.error != prevProps.error && this.props.error == SIGN_UP_ERROR.EMAIL_EXIST) {\r\n            this.setState(Object.assign({}, this.state, { emailValidation: false }));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"app\">\r\n            <div className=\"app-background\">\r\n                <div className=\"app-container\">\r\n                    <div className=\"app-logo title\">\r\n                        <div className=\"svg logo\" />\r\n                        <span>DRON TAXI</span>\r\n                    </div>\r\n                    <div className=\"signup-container align-center justify-center\">\r\n                        <Form className=\"signup-form\">\r\n                            <Row>\r\n                                <Cell>\r\n                                    <span className=\"title\">Регистрация</span>\r\n                                </Cell>\r\n                            </Row>\r\n                            <Row>\r\n                                <Cell>\r\n                                    <Input\r\n                                        label=\"Фамилия\"\r\n                                        placeholder=\"\"\r\n                                        password={false}\r\n                                        value={this.state.surname}\r\n                                        valid={this.state.surnameValidation}\r\n                                        mandatory={true}\r\n                                        onChange={this.changeInput.bind(this, \"surname\", true)}\r\n                                    />\r\n                                </Cell>\r\n                            </Row>\r\n                            <Row>\r\n                                <Cell>\r\n                                    <Input\r\n                                        label=\"Имя\"\r\n                                        placeholder=\"\"\r\n                                        password={false}\r\n                                        value={this.state.name}\r\n                                        valid={this.state.nameValidation}\r\n                                        mandatory={true}\r\n                                        onChange={this.changeInput.bind(this, \"name\", true)}\r\n                                    />\r\n                                </Cell>\r\n                            </Row>\r\n                            <Row>\r\n                                <Cell>\r\n                                    <Input\r\n                                        label=\"Отчество\"\r\n                                        placeholder=\"\"\r\n                                        password={false}\r\n                                        value={this.state.midname}\r\n                                        onChange={this.changeInput.bind(this, \"midname\", false)}\r\n                                    />\r\n                                </Cell>\r\n                            </Row>\r\n                            <Row>\r\n                                <Cell>\r\n                                    <Input\r\n                                        label=\"Email\"\r\n                                        placeholder=\"\"\r\n                                        password={false}\r\n                                        value={this.state.email}\r\n                                        valid={this.state.emailValidation}\r\n                                        mandatory={true}\r\n                                        onChange={this.changeEmail}\r\n                                    />\r\n                                </Cell>\r\n                            </Row>\r\n                            <Row>\r\n                                <Cell>\r\n                                    <PasswordInput\r\n                                        label=\"Пароль\"\r\n                                        placeholder=\"\"\r\n                                        password={true}\r\n                                        value={this.state.password}\r\n                                        valid={this.state.passwordValidation}\r\n                                        mandatory={true}\r\n                                        onChange={this.changePassword}\r\n                                    />\r\n                                </Cell>\r\n                            </Row>\r\n                            <Row>\r\n                                <Cell>\r\n                                    <Input\r\n                                        label=\"Подтвердить пароль\"\r\n                                        placeholder=\"\"\r\n                                        password={true}\r\n                                        value={this.state.passwordConfirm}\r\n                                        valid={this.state.passwordConfirmValidation}\r\n                                        mandatory={true}\r\n                                        onChange={this.changePasswordConfirm}\r\n                                    />\r\n                                </Cell>\r\n                            </Row>\r\n                            <Row>\r\n                                <Cell>\r\n                                    <Button\r\n                                        label=\"Регистрация\"\r\n                                        className=\"btn-green\"\r\n                                        disabled={!this.isValid()}\r\n                                        onClick={this.signUp}\r\n                                    />\r\n                                </Cell>\r\n                            </Row>\r\n                            <SignUpError\r\n                                error={this.props.error}\r\n                            />\r\n                        </Form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nclass SignUpError extends React.PureComponent {\r\n    render() {\r\n        if (!this.props.error) {\r\n            return null\r\n        }\r\n        let errorText = \"Ошибка при создании пользователя\";\r\n        if (this.props.error.errorCode == SIGN_UP_ERROR.ERROR_WITH_MESSAGE) {\r\n            errorText = this.props.error.errorMessage;\r\n        }\r\n        return <Row>\r\n            <Cell className=\"title invalid-text\" style={{ maxWidth: \"350px\" }}>\r\n                <span>{errorText}</span>\r\n            </Cell>\r\n        </Row>\r\n    }\r\n}","import React from 'react';\nimport './css/app.css';\nimport './css/fonts.css';\nimport './css/svg.css';\nimport './css/form.css';\nimport './css/table.css';\nimport 'react-datepicker/dist/react-datepicker.css';\n\nimport LoadingPage from './components/static/loading';\nimport NotFoundPage from './components/static/notfound';\nimport ProfilePage from './components/profile/profile';\nimport LoginPage from './components/login/login';\nimport SignUpPage from './components/signup/signup';\n\nexport default class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.props.autologin();\n  }\n\n  render() {\n    if (this.props.security.loggedIn === null) {\n      return <LoadingPage />;\n    }\n    if (!this.props.security.loggedIn) {\n      if (this.props.path == \"/signup\") {\n        return <SignUpPage\n          error={this.props.security.signUpError}\n          signUp={this.props.signUp}\n          clearError={this.props.clearSignUpError}\n        />;\n      }\n      return <LoginPage\n        cookies={this.props.security.cookies}\n        error={this.props.security.loginError}\n        login={this.props.login}\n        changeLocation={this.props.changeLocation}\n        clearError={this.props.clearLoginError}\n      />\n    }\n    switch (this.props.path) {\n      case \"\":\n      case \"/\":\n        return <ProfilePage\n          path=\"/profile\"\n          logout={this.props.logout}\n          user={this.props.security.user}\n          formState={this.props.profile.formState}\n          formStateError={this.props.profile.formStateError}\n          orders={this.props.profile.orders}\n          ordersError={this.props.profile.ordersError}\n          ordersLoading={this.props.profile.ordersLoading}\n          saveProfile={this.props.saveProfile}\n          addOrder={this.props.addOrder}\n          cancelOrder={this.props.cancelOrder}\n        />;\n      case \"/profile\":\n        return <ProfilePage\n          path={this.props.path}\n          logout={this.props.logout}\n          user={this.props.security.user}\n          formState={this.props.profile.formState}\n          formStateError={this.props.profile.formStateError}\n          orders={this.props.profile.orders}\n          ordersError={this.props.profile.ordersError}\n          ordersLoading={this.props.profile.ordersLoading}\n          saveProfile={this.props.saveProfile}\n          addOrder={this.props.addOrder}\n          cancelOrder={this.props.cancelOrder}\n        />;\n      case \"/signup\":\n        return <SignUpPage\n          error={this.props.security.signUpError}\n          signUp={this.props.signUp}\n          clearError={this.props.clearSignUpError}\n        />;\n      default:\n        return <NotFoundPage\n          path={this.props.path}\n          changeLocation={this.props.changeLocation}\n        />;\n    }\n  }\n};\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider, connect } from 'react-redux'\nimport { createStore, compose, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk';\nimport * as serviceWorker from './serviceWorker';\nimport reducers from './reducers';\n\nimport { LOCATION } from './constants/location';\nimport { SECURITY } from './constants/security';\nimport { PROFILE } from './constants/profile';\n\nimport { changeLocation } from './actions/location';\nimport { login, signUp, sendLoginError, sendSignUpError, logout, autologin } from './actions/security';\n\nimport { initializeLocation } from './services/location';\n\nimport App from './App';\nimport { saveProfile, addOrder, cancelOrder } from './actions/profile';\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(reducers, composeEnhancer(applyMiddleware(thunk)));\ninitializeLocation(store.dispatch);\n\nconst ConnectedApp = connect((globalState) => {\n  return {\n    path: globalState[LOCATION].path,\n    security: globalState[SECURITY],\n    profile: globalState[PROFILE]\n  }\n}, (dispatch) => {\n  return {\n    changeLocation: function (path) {\n      dispatch(changeLocation(path));\n    },\n    autologin: function () {\n      dispatch(autologin());\n    },\n    login: function ({ user, password, remember }) {\n      dispatch(login(user, password, remember));\n    },\n    logout: function () {\n      dispatch(logout());\n    },\n    clearLoginError: function () {\n      dispatch(sendLoginError(false));\n    },\n    signUp: function ({ surname, name, midname, email, password }) {\n      dispatch(signUp(surname, name, midname, email, password));\n    },\n    clearSignUpError: function () {\n      dispatch(sendSignUpError(null));\n    },\n    saveProfile: function ({ login, photo, surname, name, midname, birthday, sex, email, phone, password }) {\n      dispatch(saveProfile(login, photo, surname, name, midname, birthday, sex, email, phone, password));\n    },\n    addOrder: function ({ sourcePlace, destinationPlace, vehicle }) {\n      dispatch(addOrder(sourcePlace, destinationPlace, vehicle));\n    },\n    cancelOrder: function ({ number }) {\n      dispatch(cancelOrder(number));\n    }\n  }\n})(App)\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ConnectedApp />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}